<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>Kanji Trainer ‚Äì Nh·∫≠p nghƒ©a ti·∫øng Vi·ªát</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: linear-gradient(135deg, #fdfbfb, #ebedee);
        margin: 0;
        padding: 20px;
        color: #333;
      }
      h1 {
        text-align: center;
        margin: 0 0 6px;
        font-size: 24px;
      }
      .sub {
        text-align: center;
        font-size: 13px;
        color: #777;
        margin-bottom: 16px;
      }
      #layout {
        max-width: 900px;
        margin: 0 auto;
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
      }
      #main {
        flex: 2 1 280px;
        text-align: center;
      }
      #side {
        flex: 1 1 220px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 14px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        padding: 10px;
        max-height: 480px;
        overflow-y: auto;
        font-size: 13px;
      }
      #side h2 {
        text-align: center;
        margin: 2px 0 6px;
        font-size: 15px;
      }
      .item-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 5px 7px;
        border-radius: 8px;
        cursor: pointer;
        transition: background 0.15s;
      }
      .item-row:hover {
        background: #e0f2f1;
      }
      .item-row.active {
        background: #c8e6c9;
      }
      .item-kanji {
        font-size: 20px;
        margin-right: 6px;
      }
      .item-read {
        color: #555;
        margin-right: 4px;
      }
      .item-mean {
        color: #777;
        font-size: 11px;
      }

      #card {
        width: 260px;
        min-height: 240px;
        background: white;
        margin: 10px auto 8px;
        border-radius: 20px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 14px;
        position: relative;
      }
      #face-label {
        position: absolute;
        top: 8px;
        right: 12px;
        font-size: 11px;
        color: #999;
      }
      #card-main {
        font-size: 52px;
        margin-bottom: 4px;
      }
      #card-sub {
        font-size: 18px;
        color: #555;
        min-height: 22px;
      }

      .controls {
        margin-top: 10px;
      }
      .btn {
        padding: 6px 14px;
        border-radius: 999px;
        border: none;
        background: #4caf50;
        color: white;
        font-size: 14px;
        margin: 3px;
        cursor: pointer;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.18);
        transition: transform 0.1s, box-shadow 0.1s;
      }
      .btn.secondary {
        background: #607d8b;
      }
      .btn.outline {
        background: white;
        color: #4caf50;
        border: 1px solid #4caf50;
        box-shadow: none;
      }
      .btn:active {
        transform: translateY(1px);
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.25);
      }

      #input-area {
        margin-top: 8px;
      }
      #vn-input {
        width: 90%;
        max-width: 320px;
        padding: 6px 8px;
        border-radius: 999px;
        border: 1px solid #ccc;
        font-size: 14px;
      }

      #feedback {
        margin-top: 6px;
        min-height: 20px;
        font-size: 14px;
      }
      #feedback.correct {
        color: #2e7d32;
      }
      #feedback.wrong {
        color: #c62828;
      }

      #extra-info {
        margin-top: 4px;
        font-size: 13px;
        color: #555;
      }

      .top-buttons {
        text-align: center;
        margin-bottom: 8px;
      }
      .mode-btn {
        padding: 4px 12px;
        font-size: 12px;
        border-radius: 999px;
        border: 1px solid #ccc;
        background: white;
        cursor: pointer;
        margin: 0 4px;
      }
      .mode-btn.active {
        background: #4caf50;
        color: white;
        border-color: #4caf50;
      }

      @media (max-width: 780px) {
        #layout {
          flex-direction: column;
        }
        #side {
          max-height: 220px;
        }
      }
    </style>
  </head>
  <body>
    <h1>Kanji Trainer ‚Äì Nh·∫≠p nghƒ©a ti·∫øng Vi·ªát</h1>
    <p class="sub">
      Hi·ªán Kanji + Hiragana ‚Üí b·∫°n t·ª± g√µ nghƒ©a ti·∫øng Vi·ªát ƒë·ªÉ nh·ªõ l√¢u h∆°n üí™
    </p>

    <div class="top-buttons">
      <button id="hiraBtn" class="mode-btn active" onclick="toggleHira()">
        „Å≤„Çâ„Åå„Å™: ON
      </button>
      <button id="showMeanBtn" class="mode-btn" onclick="toggleShowMean()">
        Hi·ªán ƒë√°p √°n VN
      </button>
    </div>

    <div id="layout">
      <div id="main">
        <div id="card">
          <div id="face-label">KANJI</div>
          <div id="card-main">Áî∫</div>
          <div id="card-sub">„Åæ„Å°</div>
        </div>

        <div id="input-area">
          <input
            id="vn-input"
            type="text"
            placeholder="Nh·∫≠p nghƒ©a ti·∫øng Vi·ªát c·ªßa t·ª´ n√†y..."
          />
        </div>

        <div class="controls">
          <button class="btn" onclick="checkAnswer()">Check</button>
          <button class="btn secondary" onclick="next()">Next ‚ñ∂</button>
          <button class="btn secondary" onclick="prev()">‚óÄ Prev</button>
          <button class="btn outline" onclick="randomCard()">Random üé≤</button>
        </div>

        <div id="feedback"></div>
        <div id="extra-info"></div>
      </div>

      <div id="side">
        <h2>Danh s√°ch t·ª´</h2>
        <div id="list-body"></div>
      </div>
    </div>

    <script>
      const vocabList = [
        { kanji: "Á¥ô", read: "„Åã„Åø", mean: "t·ªù gi·∫•y" },
        {
          kanji: "Êó•Êú¨Ë™ûÂ≠¶Ê†°",
          read: "„Å´„Åª„Çì„Åî„Åå„Å£„Åì„ÅÜ",
          mean: "tr∆∞·ªùng ti·∫øng Nh·∫≠t",
        },
        { kanji: "Êúà", read: "„Åå„Å§", mean: "th√°ng" },
        { kanji: "Êó•", read: "„Å´„Å°", mean: "ng√†y" },
        { kanji: "Â∏Ç", read: "„Åó", mean: "th√†nh ph·ªë" },
        { kanji: "‰ΩìËÇ≤È§®", read: "„Åü„ÅÑ„ÅÑ„Åè„Åã„Çì", mean: "nh√† thi ƒë·∫•u th·ªÉ thao" },
        { kanji: "Âà©Áî®ÊñôÈáë", read: "„Çä„Çà„ÅÜ„Çä„Çá„ÅÜ„Åç„Çì", mean: "ph√≠ s·ª≠ d·ª•ng" },
        { kanji: "ÊôÇÈñì", read: "„Åò„Åã„Çì", mean: "th·ªùi gian" },
        { kanji: "‰∫∫", read: "„Å≤„Å®Ôºè„Å´„Çì", mean: "ng∆∞·ªùi" },
        { kanji: "‰ªäÈÄ±", read: "„Åì„Çì„Åó„ÇÖ„ÅÜ", mean: "tu·∫ßn n√†y" },
        { kanji: "ÊâÄ", read: "„Å®„Åì„Çç", mean: "ch·ªó; n∆°i" },
        { kanji: "Êù•„Çã", read: "„Åè„Çã", mean: "ƒë·∫øn" },
        { kanji: "ÂêçÂâç", read: "„Å™„Åæ„Åà", mean: "t√™n" },
        { kanji: "Êïô„Åà„Çã", read: "„Åä„Åó„Åà„Çã", mean: "d·∫°y; n√≥i cho bi·∫øt" },

        // Mondai 4 ‚Äì b√†i 2
        { kanji: "ÁßÅ", read: "„Çè„Åü„Åó", mean: "t√¥i" },
        { kanji: "Â¶π", read: "„ÅÑ„ÇÇ„ÅÜ„Å®", mean: "em g√°i" },
        { kanji: "ÂÖ•„Çã", read: "„ÅØ„ÅÑ„Çã", mean: "v√†o; tham gia" },
        { kanji: "ÊØéÊó•", read: "„Åæ„ÅÑ„Å´„Å°", mean: "m·ªói ng√†y" },
        { kanji: "ÊéàÊ•≠", read: "„Åò„ÇÖ„Åé„Çá„ÅÜ", mean: "gi·ªù h·ªçc" },
        { kanji: "Á∑¥Áøí", read: "„Çå„Çì„Åó„ÇÖ„ÅÜ", mean: "luy·ªán t·∫≠p" },
        { kanji: "Áñ≤„Çå„Çã", read: "„Å§„Åã„Çå„Çã", mean: "m·ªát" },
        { kanji: "Â§ú", read: "„Çà„Çã", mean: "ban ƒë√™m" },
        { kanji: "Êó©„Åè", read: "„ÅØ„ÇÑ„Åè", mean: "s·ªõm" },
        { kanji: "ÂØù„Çã", read: "„Å≠„Çã", mean: "ng·ªß" },
        { kanji: "ÂÆøÈ°å", read: "„Åó„ÇÖ„Åè„Å†„ÅÑ", mean: "b√†i t·∫≠p v·ªÅ nh√†" },
        { kanji: "Â≠¶Ê†°", read: "„Åå„Å£„Åì„ÅÜ", mean: "tr∆∞·ªùng h·ªçc" },
        { kanji: "ÁµÇ„Çè„Çã", read: "„Åä„Çè„Çã", mean: "k·∫øt th√∫c" },
        { kanji: "‰∫àÁøí", read: "„Çà„Åó„ÇÖ„ÅÜ", mean: "chu·∫©n b·ªã b√†i" },

        // Mondai 4 ‚Äì b√†i 3
        { kanji: "Âèã„Å†„Å°", read: "„Å®„ÇÇ„Å†„Å°", mean: "b·∫°n b√®" },
        { kanji: "Êó•Êú¨", read: "„Å´„Åª„Çì", mean: "Nh·∫≠t B·∫£n" },
        { kanji: "ÈÄ±Èñì", read: "„Åó„ÇÖ„ÅÜ„Åã„Çì", mean: "tu·∫ßn l·ªÖ" },
        { kanji: "Ë°å„Åè", read: "„ÅÑ„Åè", mean: "ƒëi" },
        { kanji: "Â§ßÈò™", read: "„Åä„Åä„Åï„Åã", mean: "Osaka" },
        { kanji: "Êù±‰∫¨", read: "„Å®„ÅÜ„Åç„Çá„ÅÜ", mean: "Tokyo" },
        {
          kanji: "Êñ∞Êù±‰∫¨„Éõ„ÉÜ„É´",
          read: "„Åó„Çì„Å®„ÅÜ„Åç„Çá„ÅÜ„Éõ„ÉÜ„É´",
          mean: "kh√°ch s·∫°n New Tokyo",
        },
        { kanji: "ÈÉΩÂêà", read: "„Å§„Åî„ÅÜ", mean: "th·ªùi gian ph√π h·ª£p" },

        // Mondai 5
        { kanji: "Ê≠≥", read: "„Åï„ÅÑ", mean: "tu·ªïi" },
        { kanji: "Â®ò", read: "„ÇÄ„Åô„ÇÅ", mean: "con g√°i" },
        { kanji: "Áµµ", read: "„Åà", mean: "tranh" },
        { kanji: "Â•Ω„Åç", read: "„Åô„Åç", mean: "th√≠ch" },
        { kanji: "‰∏äÊâã", read: "„Åò„Çá„ÅÜ„Åö", mean: "gi·ªèi" },
        { kanji: "ÂÖàÈÄ±", read: "„Åõ„Çì„Åó„ÇÖ„ÅÜ", mean: "tu·∫ßn tr∆∞·ªõc" },
        { kanji: "ÊØç", read: "„ÅØ„ÅØ", mean: "m·∫π" },
        { kanji: "ÈÅä„Å∂", read: "„ÅÇ„Åù„Å∂", mean: "ch∆°i" },
        { kanji: "Ê•Ω„Åó„ÅÑ", read: "„Åü„ÅÆ„Åó„ÅÑ", mean: "vui v·∫ª" },
        { kanji: "ËÄÉ„Åà„Çã", read: "„Åã„Çì„Åå„Åà„Çã", mean: "suy nghƒ©" },
        { kanji: "Ë¶ã„Çã", read: "„Åø„Çã", mean: "xem; nh√¨n" },
        { kanji: "Â∞ÅÁ≠í", read: "„Åµ„ÅÜ„Å®„ÅÜ", mean: "phong b√¨" },
        { kanji: "ÂàáÊâã", read: "„Åç„Å£„Å¶", mean: "tem" },
        { kanji: "Âë®„Çä", read: "„Åæ„Çè„Çä", mean: "xung quanh" },
        { kanji: "Ëá™ÂàÜ", read: "„Åò„Å∂„Çì", mean: "b·∫£n th√¢n" },
        { kanji: "Êú®", read: "„Åç", mean: "c√¢y" },
        { kanji: "È≥•", read: "„Å®„Çä", mean: "chim" },
        { kanji: "Áä¨", read: "„ÅÑ„Å¨", mean: "ch√≥" },
        { kanji: "Ëçâ", read: "„Åè„Åï", mean: "c·ªè" },
        { kanji: "Â§™ÈôΩ", read: "„Åü„ÅÑ„Çà„ÅÜ", mean: "m·∫∑t tr·ªùi" },
        { kanji: "ÂÜôÁúü", read: "„Åó„ÇÉ„Åó„Çì", mean: "·∫£nh" },
        { kanji: "ÈÄÅ„Çã", read: "„Åä„Åè„Çã", mean: "g·ª≠i" },
        { kanji: "Âñú„Å∂", read: "„Çà„Çç„Åì„Å∂", mean: "vui m·ª´ng" },
      ];

      let idx = 0;
      let showHira = true;
      let showMean = false;

      const cardMain = document.getElementById("card-main");
      const cardSub = document.getElementById("card-sub");
      const hiraBtn = document.getElementById("hiraBtn");
      const showMeanBtn = document.getElementById("showMeanBtn");
      const listBody = document.getElementById("list-body");
      const vnInput = document.getElementById("vn-input");
      const feedback = document.getElementById("feedback");
      const extraInfo = document.getElementById("extra-info");

      function buildList() {
        listBody.innerHTML = "";
        vocabList.forEach((v, i) => {
          const row = document.createElement("div");
          row.className = "item-row";
          row.onclick = () => {
            idx = i;
            updateCard();
          };

          const left = document.createElement("div");
          left.style.display = "flex";
          left.style.alignItems = "center";

          const k = document.createElement("div");
          k.className = "item-kanji";
          k.textContent = v.kanji;

          const r = document.createElement("div");
          r.className = "item-read";
          r.textContent = v.read;

          left.appendChild(k);
          left.appendChild(r);

          const m = document.createElement("div");
          m.className = "item-mean";
          m.textContent = v.mean;

          row.appendChild(left);
          row.appendChild(m);
          listBody.appendChild(row);
        });
        highlightActive();
        updateHiraDisplay();
        updateMeanDisplay();
      }

      function highlightActive() {
        const rows = document.querySelectorAll(".item-row");
        rows.forEach((r, i) => r.classList.toggle("active", i === idx));
      }

      function updateHiraDisplay() {
        const reads = document.querySelectorAll(".item-read");
        reads.forEach((el) => {
          el.style.display = showHira ? "inline-block" : "none";
        });
        hiraBtn.classList.toggle("active", showHira);
        hiraBtn.textContent = showHira ? "„Å≤„Çâ„Åå„Å™: ON" : "„Å≤„Çâ„Åå„Å™: OFF";
      }

      function updateMeanDisplay() {
        const means = document.querySelectorAll(".item-mean");
        means.forEach((el) => {
          el.style.display = showMean ? "inline-block" : "none";
        });
        showMeanBtn.classList.toggle("active", showMean);
        showMeanBtn.textContent = showMean ? "·∫®n ƒë√°p √°n VN" : "Hi·ªán ƒë√°p √°n VN";
      }

      function normalizeVN(text) {
        return text.toLowerCase().trim().replace(/\s+/g, " ");
      }

      function updateCard() {
        highlightActive();
        const v = vocabList[idx];
        cardMain.textContent = v.kanji;
        cardSub.textContent = showHira ? v.read : "";
        vnInput.value = "";
        feedback.textContent = "";
        feedback.classList.remove("correct", "wrong");
        extraInfo.textContent = showMean ? "ƒê√°p √°n: " + v.mean : "";
      }

      function next() {
        idx = (idx + 1) % vocabList.length;
        updateCard();
      }
      function prev() {
        idx = (idx - 1 + vocabList.length) % vocabList.length;
        updateCard();
      }
      function randomCard() {
        if (vocabList.length <= 1) return;
        let old = idx;
        while (true) {
          const r = Math.floor(Math.random() * vocabList.length);
          if (r !== old) {
            idx = r;
            break;
          }
        }
        updateCard();
      }

      function checkAnswer() {
        const v = vocabList[idx];
        const user = normalizeVN(vnInput.value);
        const correct = normalizeVN(v.mean);

        feedback.classList.remove("correct", "wrong");

        if (!user) {
          feedback.textContent = "B·∫°n ch∆∞a nh·∫≠p nghƒ©a ti·∫øng Vi·ªát.";
          return;
        }

        if (user === correct) {
          feedback.textContent = "ƒê√∫ng r·ªìi! üéâ";
          feedback.classList.add("correct");
        } else {
          feedback.textContent = "Ch∆∞a ch√≠nh x√°c üòÖ";
          feedback.classList.add("wrong");
        }

        if (showMean) {
          extraInfo.textContent = "ƒê√°p √°n: " + v.mean;
        } else {
          extraInfo.textContent =
            'G·ª£i √Ω: ƒë√°p √°n ƒë√∫ng c√≥ d·∫°ng g·∫ßn v·ªõi: "' + v.mean + '"';
        }
      }

      function toggleHira() {
        showHira = !showHira;
        updateHiraDisplay();
        updateCard();
      }

      function toggleShowMean() {
        showMean = !showMean;
        updateMeanDisplay();
        updateCard();
      }

      /* init */
      buildList();
      updateCard();

      /* Enter = check */
      vnInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          checkAnswer();
        }
      });
    </script>
  </body>
</html>
