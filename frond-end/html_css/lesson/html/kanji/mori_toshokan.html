<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>Mori Âõ≥Êõ∏È§® ‚Äì Vocab Trainer (Hiragana ON/OFF)</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: linear-gradient(135deg, #fdfbfb, #ebedee);
        margin: 0;
        padding: 20px;
        color: #333;
      }
      h1 {
        text-align: center;
        margin: 0 0 10px;
        font-size: 24px;
      }
      .sub {
        text-align: center;
        font-size: 13px;
        color: #777;
        margin-bottom: 12px;
      }

      .mode-switch {
        text-align: center;
        margin-bottom: 10px;
      }
      .mode-btn {
        padding: 6px 14px;
        margin: 0 4px;
        font-size: 13px;
        border-radius: 999px;
        border: 1px solid #ccc;
        background: white;
        cursor: pointer;
        transition: all 0.2s;
      }
      .mode-btn.active {
        background: #4caf50;
        color: white;
        border-color: #4caf50;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
      }

      #layout {
        max-width: 900px;
        margin: 0 auto;
        display: flex;
        gap: 16px;
      }
      #main {
        flex: 2;
        text-align: center;
      }
      #list {
        flex: 1;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 14px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        padding: 10px;
        max-height: 480px;
        overflow-y: auto;
        font-size: 13px;
      }
      #list h2 {
        text-align: center;
        margin: 2px 0 6px;
        font-size: 15px;
      }

      .item-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 5px 7px;
        border-radius: 8px;
        cursor: pointer;
        transition: background 0.15s;
      }
      .item-row:hover {
        background: #e0f2f1;
      }
      .item-row.active {
        background: #c8e6c9;
      }

      .item-kanji {
        font-size: 20px;
        margin-right: 6px;
      }
      .item-read {
        color: #555;
        margin-right: 4px;
      }
      .item-mean {
        color: #777;
        font-size: 11px;
      }

      #card {
        width: 230px;
        height: 270px;
        background: white;
        margin: 15px auto 8px;
        border-radius: 20px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        position: relative;
        transition: transform 0.2s, box-shadow 0.2s;
        padding: 10px;
      }
      #card:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 26px rgba(0, 0, 0, 0.2);
      }
      #face-label {
        position: absolute;
        top: 8px;
        right: 12px;
        font-size: 11px;
        color: #999;
      }
      #card-main {
        font-size: 50px;
        margin-bottom: 4px;
        word-break: keep-all;
      }
      #card-sub {
        font-size: 16px;
        color: #555;
        min-height: 22px;
      }
      #card-extra {
        margin-top: 6px;
        min-height: 30px;
        font-size: 14px;
      }

      .btn-row {
        margin-top: 8px;
      }
      .btn {
        padding: 6px 14px;
        border-radius: 999px;
        border: none;
        background: #4caf50;
        color: white;
        font-size: 14px;
        margin: 4px;
        cursor: pointer;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.18);
        transition: transform 0.1s, box-shadow 0.1s;
      }
      .btn.secondary {
        background: #607d8b;
      }
      .btn.outline {
        background: white;
        color: #4caf50;
        border: 1px solid #4caf50;
        box-shadow: none;
      }
      .btn:active {
        transform: translateY(1px);
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.25);
      }

      #quiz-area {
        display: none;
        margin-top: 8px;
      }
      .quiz-options {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
        max-width: 360px;
        margin: 8px auto;
      }
      .quiz-option {
        padding: 6px 8px;
        border-radius: 8px;
        border: 1px solid #ccc;
        background: white;
        cursor: pointer;
        font-size: 13px;
        transition: background 0.15s, border-color 0.15s, box-shadow 0.15s;
      }
      .quiz-option.correct {
        background: #c8e6c9;
        border-color: #4caf50;
        box-shadow: 0 0 0 1px #4caf50;
      }
      .quiz-option.wrong {
        background: #ffcdd2;
        border-color: #f44336;
        box-shadow: 0 0 0 1px #f44336;
      }
      #feedback {
        min-height: 20px;
        font-size: 13px;
        margin-top: 4px;
      }
      #stats {
        font-size: 13px;
        color: #555;
        margin-top: 8px;
      }

      @media (max-width: 780px) {
        #layout {
          flex-direction: column;
        }
        #list {
          max-height: 220px;
        }
      }
    </style>
  </head>
  <body>
    <h1>„ÄåÁî∫„ÅÆÂõ≥Êõ∏È§®„ÄçË™ûÂΩô„Éà„É¨„Éº„Éä„Éº</h1>
    <p class="sub">
      Luy·ªán Kanji ‚Äì Hiragana ‚Äì Nghƒ©a ti·∫øng Vi·ªát cho ƒëo·∫°n vƒÉn Mori Âõ≥Êõ∏È§® üìö
    </p>

    <div class="mode-switch">
      <button id="flashBtn" class="mode-btn active" onclick="setMode('flash')">
        Flashcards
      </button>
      <button id="quizBtn" class="mode-btn" onclick="setMode('quiz')">
        Quiz (Nghƒ©a)
      </button>
      <button id="revBtn" class="mode-btn" onclick="setMode('reverse')">
        Reverse (VN ‚Üí Kanji)
      </button>
      <button id="hiraBtn" class="mode-btn" onclick="toggleHira()">
        „Å≤„Çâ„Åå„Å™: ON
      </button>
    </div>

    <div id="layout">
      <div id="main">
        <div id="card" onclick="flipCard()">
          <div id="face-label">KANJI</div>
          <div id="card-main">Áî∫</div>
          <div id="card-sub">„Åæ„Å°</div>
          <div id="card-extra">th·ªã tr·∫•n</div>
        </div>

        <div class="btn-row" id="flashBtns">
          <button class="btn secondary" onclick="prev()">‚óÄ Prev</button>
          <button class="btn" onclick="next()">Next ‚ñ∂</button>
          <button class="btn outline" onclick="randomCard()">Random üé≤</button>
        </div>

        <div id="quiz-area">
          <p><strong>Ch·ªçn nghƒ©a ƒë√∫ng:</strong></p>
          <div class="quiz-options" id="quiz-options"></div>
          <div id="feedback"></div>
          <button class="btn" onclick="nextQuiz()">Next ‚ñ∂</button>
        </div>

        <div id="stats">
          ƒê√∫ng: <span id="s-correct">0</span> | Sai:
          <span id="s-wrong">0</span> | Ch√≠nh x√°c: <span id="s-acc">0%</span>
        </div>
      </div>

      <div id="list">
        <h2>Danh s√°ch t·ª´ v·ª±ng</h2>
        <div id="list-body"></div>
      </div>
    </div>

    <script>
      const vocabList = [
        { kanji: "Áî∫", read: "„Åæ„Å°", mean: "th·ªã tr·∫•n" },
        { kanji: "Âõ≥Êõ∏È§®", read: "„Å®„Åó„Çá„Åã„Çì", mean: "th∆∞ vi·ªán" },
        { kanji: "Ê£ÆÂõ≥Êõ∏È§®", read: "„ÇÇ„Çä„Å®„Åó„Çá„Åã„Çì", mean: "Th∆∞ vi·ªán Mori" },
        { kanji: "ÂÖàÊúà", read: "„Åõ„Çì„Åí„Å§", mean: "th√°ng tr∆∞·ªõc" },
        { kanji: "Êó•Êú¨‰∫∫", read: "„Å´„Åª„Çì„Åò„Çì", mean: "ng∆∞·ªùi Nh·∫≠t" },
        { kanji: "Â§ßÂ≠¶", read: "„Å†„ÅÑ„Åå„Åè", mean: "ƒë·∫°i h·ªçc" },
        { kanji: "Ê¥ãÊúç", read: "„Çà„ÅÜ„Åµ„Åè", mean: "qu·∫ßn √°o (ki·ªÉu T√¢y)" },
        { kanji: "ÈõëË™å", read: "„Åñ„Å£„Åó", mean: "t·∫°p ch√≠" },
        { kanji: "Êò†Áîª", read: "„Åà„ÅÑ„Åå", mean: "phim" },
        { kanji: "ÊóÖË°å", read: "„Çä„Çá„Åì„ÅÜ", mean: "du l·ªãch" },
        { kanji: "Êó•Êú¨Ë™û", read: "„Å´„Åª„Çì„Åî", mean: "ti·∫øng Nh·∫≠t" },
        { kanji: "ÂÜôÁúü", read: "„Åó„ÇÉ„Åó„Çì", mean: "h√¨nh ·∫£nh" },
        { kanji: "‰∫ã", read: "„Åì„Å®", mean: "vi·ªác, ƒëi·ªÅu" },
        { kanji: "Á¥π‰ªã", read: "„Åó„Çá„ÅÜ„Åã„ÅÑ", mean: "gi·ªõi thi·ªáu" },
        { kanji: "‰∫¨ÈÉΩ", read: "„Åç„Çá„ÅÜ„Å®", mean: "Kyoto" },
        { kanji: "Âè§„ÅÑ", read: "„Åµ„Çã„ÅÑ", mean: "c≈© (ƒë·ªì v·∫≠t)" },
        { kanji: "ÂØ∫Ôºà„ÅäÂØ∫Ôºâ", read: "„Å¶„ÇâÔºè„Åä„Å¶„Çâ", mean: "ch√πa" },
        { kanji: "Ê©ã", read: "„ÅØ„Åó", mean: "c·∫ßu" },
        { kanji: "Ë°å„Åè", read: "„ÅÑ„Åè", mean: "ƒëi" },
        {
          kanji: "Ë°å„Å£„Åü„Åì„Å®„Åå„Å™„ÅÑ",
          read: "„ÅÑ„Å£„Åü„Åì„Å®„Åå„Å™„ÅÑ",
          mean: "ch∆∞a t·ª´ng ƒëi",
        },
        { kanji: "Ë¶ã„Çã", read: "„Åø„Çã", mean: "xem, nh√¨n" },
        { kanji: "ÂÄü„Çä„Çã", read: "„Åã„Çä„Çã", mean: "m∆∞·ª£n" },
        {
          kanji: "Ê•Ω„Åó„ÇÅ„Çã",
          read: "„Åü„ÅÆ„Åó„ÇÅ„Çã",
          mean: "c√≥ th·ªÉ th∆∞·ªüng th·ª©c; vui ƒë∆∞·ª£c",
        },
        { kanji: "‰∏ÄÂ∫¶", read: "„ÅÑ„Å°„Å©", mean: "m·ªôt l·∫ßn" },
      ];

      let idx = 0;
      let front = true;
      let mode = "flash"; // flash | quiz | reverse
      let correct = 0,
        wrong = 0;
      let showHira = true;

      const cardMain = document.getElementById("card-main");
      const cardSub = document.getElementById("card-sub");
      const cardExtra = document.getElementById("card-extra");
      const faceLabel = document.getElementById("face-label");
      const listBody = document.getElementById("list-body");
      const flashBtns = document.getElementById("flashBtns");
      const quizArea = document.getElementById("quiz-area");
      const quizOpts = document.getElementById("quiz-options");
      const feedback = document.getElementById("feedback");
      const sCorrect = document.getElementById("s-correct");
      const sWrong = document.getElementById("s-wrong");
      const sAcc = document.getElementById("s-acc");
      const flashBtn = document.getElementById("flashBtn");
      const quizBtn = document.getElementById("quizBtn");
      const revBtn = document.getElementById("revBtn");
      const hiraBtn = document.getElementById("hiraBtn");

      function buildList() {
        listBody.innerHTML = "";
        vocabList.forEach((v, i) => {
          const row = document.createElement("div");
          row.className = "item-row";
          row.onclick = () => {
            idx = i;
            front = true;
            updateCard();
          };

          const left = document.createElement("div");
          left.style.display = "flex";
          left.style.alignItems = "center";

          const k = document.createElement("div");
          k.className = "item-kanji";
          k.textContent = v.kanji;

          const r = document.createElement("div");
          r.className = "item-read hira";
          r.textContent = v.read;

          left.appendChild(k);
          left.appendChild(r);

          const m = document.createElement("div");
          m.className = "item-mean";
          m.textContent = v.mean;

          row.appendChild(left);
          row.appendChild(m);
          listBody.appendChild(row);
        });
        highlightActive();
        updateHiraDisplay();
      }

      function highlightActive() {
        const rows = document.querySelectorAll(".item-row");
        rows.forEach((r, i) => r.classList.toggle("active", i === idx));
      }

      function updateStats() {
        sCorrect.textContent = correct;
        sWrong.textContent = wrong;
        const total = correct + wrong;
        sAcc.textContent =
          total === 0 ? "0%" : Math.round((correct * 100) / total) + "%";
      }

      function updateHiraDisplay() {
        const reads = document.querySelectorAll(".item-read");
        reads.forEach((el) => {
          el.style.display = showHira ? "inline-block" : "none";
        });
        hiraBtn.textContent = showHira ? "„Å≤„Çâ„Åå„Å™: ON" : "„Å≤„Çâ„Åå„Å™: OFF";
      }

      function updateCard() {
        highlightActive();
        const v = vocabList[idx];

        if (mode === "flash") {
          flashBtns.style.display = "block";
          quizArea.style.display = "none";
          if (front) {
            faceLabel.textContent = "KANJI";
            cardMain.textContent = v.kanji;
            cardSub.textContent = showHira ? v.read : "";
            cardExtra.textContent = v.mean;
          } else {
            faceLabel.textContent = "MEANING";
            cardMain.textContent = v.mean;
            cardSub.textContent = showHira ? v.read : "";
            cardExtra.textContent = v.kanji;
          }
        } else if (mode === "reverse") {
          flashBtns.style.display = "block";
          quizArea.style.display = "none";
          if (front) {
            faceLabel.textContent = "MEANING";
            cardMain.textContent = v.mean;
            cardSub.textContent = showHira ? v.read : "";
            cardExtra.textContent = v.kanji;
          } else {
            faceLabel.textContent = "KANJI";
            cardMain.textContent = v.kanji;
            cardSub.textContent = showHira ? v.read : "";
            cardExtra.textContent = v.mean;
          }
        } else if (mode === "quiz") {
          flashBtns.style.display = "none";
          quizArea.style.display = "block";
          faceLabel.textContent = "QUIZ";
          cardMain.textContent = v.kanji;
          cardSub.textContent = showHira ? v.read : "";
          cardExtra.textContent = "";
          makeQuiz();
        }

        updateStats();
      }

      function next() {
        idx = (idx + 1) % vocabList.length;
        front = true;
        updateCard();
      }
      function prev() {
        idx = (idx - 1 + vocabList.length) % vocabList.length;
        front = true;
        updateCard();
      }
      function randomCard() {
        let old = idx;
        if (vocabList.length <= 1) return;
        while (true) {
          let r = Math.floor(Math.random() * vocabList.length);
          if (r !== old) {
            idx = r;
            break;
          }
        }
        front = true;
        updateCard();
      }
      function flipCard() {
        if (mode === "quiz") return;
        front = !front;
        updateCard();
      }

      function setMode(m) {
        mode = m;
        front = true;
        flashBtn.classList.toggle("active", mode === "flash");
        quizBtn.classList.toggle("active", mode === "quiz");
        revBtn.classList.toggle("active", mode === "reverse");
        feedback.textContent = "";
        updateCard();
      }

      function toggleHira() {
        showHira = !showHira;
        updateHiraDisplay();
        updateCard();
      }

      /* Quiz logic */
      function shuffle(arr) {
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
      }
      function makeQuiz() {
        quizOpts.innerHTML = "";
        feedback.textContent = "";
        const correctItem = vocabList[idx];
        let candidates = vocabList.filter((_, i) => i !== idx);
        shuffle(candidates);
        const wrongs = candidates.slice(0, 3);
        let options = [
          { text: correctItem.mean, correct: true },
          ...wrongs.map((w) => ({ text: w.mean, correct: false })),
        ];
        shuffle(options);
        options.forEach((o) => {
          const btn = document.createElement("button");
          btn.className = "quiz-option";
          btn.textContent = o.text;
          btn.onclick = () => checkQuiz(btn, o.correct, correctItem.mean);
          quizOpts.appendChild(btn);
        });
      }
      function checkQuiz(btn, isCorrect, correctText) {
        const all = document.querySelectorAll(".quiz-option");
        all.forEach((b) => (b.disabled = true));
        if (isCorrect) {
          btn.classList.add("correct");
          feedback.textContent = "ƒê√∫ng r·ªìi! üéâ";
          correct++;
        } else {
          btn.classList.add("wrong");
          feedback.textContent = "Sai m·∫•t r·ªìi üòÖ ƒê√°p √°n: " + correctText;
          wrong++;
          all.forEach((b) => {
            if (b.textContent === correctText) b.classList.add("correct");
          });
        }
        updateStats();
      }
      function nextQuiz() {
        idx = (idx + 1) % vocabList.length;
        front = true;
        updateCard();
      }

      /* init */
      buildList();
      updateCard();
    </script>
  </body>
</html>
